# VarAnaly方差分析模块
   
   VarAnaly方差分析模块包含单因素方差分析和两因素方差分析方法。
   
   ## 1. 引用头文件"VarAnaly.py"
    import VarAnaly as va
   
   ## 2. 创建VarAnaly对象
   > 1. 创建VarAnaly对象不需要提供任何参数。
   
    var=va.VarAnaly()

   ## 3. 进行单因素方差分析
   > 0. 函数原型
   
      def single_anova(self, data, rowvar=False)
      
   > 1. 使用single_anova成员方法进行单因素方差分析
   > 2. 第一个参数data为二维样本集矩阵，类型为np.array
   > 3. 第二个参数rowvar指定每一行或者每一列作为因素的不同水平，类型为bool。rowvar=True指定每一行代表因素的一个水平，即每一列作为一个观察结果；rowvar=False指定每一列代表因素的一个水平，即每一行作为一个观察结果，默认rowvar=True。
   >> 例如：对于如下的铝合金板的厚度的因素样本表。
   
   >> | 机器I | 机器II | 机器III |
   >> | ----- | ----- | ----- |
   >> | 0.236 | 0.257 | 0.258 |
   >> | 0.238 | 0.253 | 0.264 |
   >> | 0.248 | 0.255 | 0.259 |
   >> | 0.245 | 0.254 | 0.267 |
   >> | 0.243 | 0.261 | 0.262 |
   
   >> 其对应的当rowvar=True时，即每一行代表因素的不同水平时，调用时的第一个参数data表示如下
   
    data=np.array([[0.236, 0.238, 0.248, 0.245, 0.243],[0.257, 0.253, 0.255, 0.254, 0.261],[0.258, 0.264, 0.259, 0.267, 0.262]])
    
   > 4. 返回值为元组形式的方差分析试验表(sa,se,st,fa,fe,ft,\_sa,\_se,f)。该元组中的各个元素参数对应的方差分析表如下。
   
   > | 方差来源 | 平方和 | 自由度 | 均方 | F比 |
   > | ------ | ------ | ------ | ------ | ------ |
   > | 因素A | sa | fa | \_sa | f |
   > | 误差 | se | fe | \_se |  |
   > | 总和 | st | ft |  |  | 
   
    # 1. 单因素方差分析
    data=np.array([[0.236, 0.238, 0.248, 0.245, 0.243],[0.257, 0.253, 0.255, 0.254, 0.261],[0.258, 0.264, 0.259, 0.267, 0.262]])
    res=var.single_anova(data,rowvar=True)
    
    print("单因素方差分析:")
    print("使用本库函数的方差分析结果，res = ", res)
    print("使用本库函数的方差分析结果，F值 = ", res[8])
    
    res=f_oneway(data[0],data[1],data[2])
    print("使用scipy.stats.f_oneway的方差分析检验结果，F值 = ", res[0])
    
    >>> 输出
    单因素方差分析:
    使用本库函数的方差分析结果，res =  (0.0010533333333333367, 0.00019200000000000033, 0.001245333333333337, 2, 12, 14,      0.0005266666666666683, 1.6000000000000026e-05, 32.916666666666714)
    使用本库函数的方差分析结果，F值 =  32.916666666666714
    使用scipy.stats.f_oneway的方差分析检验结果，F值 =  32.91666666666668
    
    
   ## 4. 进行两因素方差分析
   > 0. 函数原型
   
      def double_anova(self, data)
      
   > 1. 使用double_anova成员方法进行两因素方差分析
   > 2. 第一个参数data为三维样本集矩阵，该矩阵的格式严格要求如下：其中每一行代表因素A的不同水平，每一列代表因素B的不同水平，data[i][j]中则包含因素A在水平i，因素B在水平j下的若干个样本观察值。
   >> 例如：对于如下的火箭射程的因素样本表。
   
   >> |       | 推进器B1 | 推进器B2 | 推进器B3 |
   >> | ------ | ---------- | ---------- | ---------- |
   >> | 燃料A1 | 58.2, 52.6 | 56.2, 41.2 | 65.3, 60.8 |
   >> | 燃料A2 | 49.1, 42.8 | 54.1, 50.5 | 51.6, 48.4 |
   >> | 燃料A3 | 60.1, 58.3 | 70.9, 73.2 | 39.2, 40.7 |
   >> | 燃料A4 | 75.8, 71.5 | 58.2, 51.0 | 48.7, 41.4 |
   
   >> 其对应的，调用时的第一个参数data表示如下
   
    data=np.array([[[58.2,52.6],[56.2,41.2],[65.3,60.8]], [[49.1,42.8],[54.1,50.5],[51.6,48.4]], [[60.1,58.3],[70.9,73.2],[39.2,40.7]], [[75.8,71.5],[58.2,51.0],[48.7,41.4]]])
    
   > 3. 返回值为元组形式的方差分析试验表(sa,sb,sab,se,st,ta,tb,tab,te,tt,\_sa,\_sb,\_sab,\_se,fa,fb,fab)。该元组中的各个元素参数对应的方差分析表如下。
   
   > | 方差来源 | 平方和 | 自由度 | 均方 | F比 |
   > | ------ | ------ | ------ | ------ | ------ |
   > | 因素A | sa | ta | \_sa | fa |
   > | 因素B | sb | tb | \_sb | fb |
   > | 交互作用 | sab | tab | \_sab | fab |
   > | 误差 | se | te | \_se |  |
   > | 总和 | st | tt |  |  | 
   
    # 2. 双因素方差分析
    data=np.array([[[58.2,52.6],[56.2,41.2],[65.3,60.8]], [[49.1,42.8],[54.1,50.5],[51.6,48.4]], [[60.1,58.3],[70.9,73.2],[39.2,40.7]], [[75.8,71.5],[58.2,51.0],[48.7,41.4]]])
    res=var.double_anova(data)

    print("双因素方差分析:")
    print("使用本库函数的方差分析结果，res = ", res)
    print("使用本库函数的方差分析结果，因素A的F值 = ", res[14])
    print("使用本库函数的方差分析结果，因素A的F值 = ", res[15])
    print("使用本库函数的方差分析结果，交互作用A×B的F值 = ", res[16])
    
    >>> 输出
    双因素方差分析:
    (261.67499999999984, 370.98083333333375, 1768.6925000000003, 236.9500000000001, 2638.298333333334, 3, 2, 6, 12, 23, 87.22499999999995, 185.49041666666687, 294.7820833333334, 19.74583333333334, 4.417387634522047, 9.393901667018365, 14.928824646549902)
    使用本库函数的方差分析结果，res =  (261.67499999999984, 370.98083333333375, 1768.6925000000003, 236.9500000000001, 2638.298333333334, 3, 2, 6, 12, 23, 87.22499999999995, 185.49041666666687, 294.7820833333334, 19.74583333333334, 4.417387634522047, 9.393901667018365, 14.928824646549902)
    使用本库函数的方差分析结果，因素A的F值 =  4.417387634522047
    使用本库函数的方差分析结果，因素A的F值 =  9.393901667018365
    使用本库函数的方差分析结果，交互作用A×B的F值 =  14.928824646549902
   
   ## 附注：
   > 1. example.py中提供了一份使用VarAnaly模块的示例代码。
